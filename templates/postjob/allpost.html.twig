{% extends 'base.html.twig' %}
{% block title %}Hello PostjobController!{% endblock %}

{% block stylesheets %}
 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
 <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="{{ asset('css/allpost.css') }}" rel="stylesheet"/>

{% endblock %}
{% block body %}
{# {% for item in paginator %} #}
    <!-- Render your item here -->

    <div class="container-fluid"> 
        <nav class="navbar">
           <span class="a"> <img src="{{ asset('image/plane.png') }}"  class="img"> ALL POST</span>
           <a href="{{ path('logout1') }}" class="float-right btn btn-danger btn-sm">LOGOUT</a>
           {# <a href="{{ path('app_profile') }}"><button type="button" class="btn btn-primary">Back</button></a> #}
           <a href="{{ path('all_publishpost') }}"><button type="button" class="btn btn-primary">PUBLISH POST</button></a>
        </nav>
    </div> 
    <div class="container">
        <div class="search-bar">
            <div class="row">
               <div class="col-sm-12">
                   <form class="d-flex search" action="{{ path('all_postjob') }}">
                        <input class="form-control me-2" type="text" name="q" id="search" placeholder="Search for job here..." aria-label="Search">
                        <button class="btn btn-primary btn2">SEARCH FOR JOBS</button>
                    </form>
                </div>  
            </div>    
        </div>
        {# <ul class="list-unstyled">
        {% for answer in answers %}
            {{ include('answer/_answer.html.twig', {
                showQuestion: true
            }) }}
        {% endfor %}
       </ul> #}
        {# {% for user in appointments %}
        <div id="display"></div>
        <div class="job-post">
            <div class="row row2">
                <div class="col-sm-3 column">
                    <img src="{{ asset('image/book.jpg') }}"  class="img2" />
                    <!-- <img src="data:image/jpg;charset=utf8;base64,<?php //echo base64_encode($rows['image']); ?>" class="img2" alt="avatar"/> -->
                </div>  
         
                <div class="col-sm-9 column">
                    <div class="parent-heading">
                
                        <h5>{{ user.jobtitle }}</h5>
                    </div>   
                    <div class="child-heading">
                        <b><span>Posted by -</span></b><span>{{ user.name }}</span>
                    </div>
                    <div class="child-heading">
                        <span class=child2-heading>
                            <b><span>Posted on -</span></b><span>{{ "now"|date("m/d/Y") }}</span>
                        </span>   
                        <span class=child3-heading>
                            <b><span>Location -</span></b><span>{{ user.location }}</span>
                        </span>
                    </div>
                    <div class="child-heading">
                            <b><span>Contact Email -</span></b><span>{{ user.email }}</span>
                    </div>
                </div>
            
            </div>
        
            <div class="row">
               <div class="col-sm-12 edit">
               <!-- <form action="getpublish.php" class="form" method="post"> -->
                    <a href = "{{ path('edit_postjob', {id: user.id }) }}"><button type="button" class="btn1">EDIT POST</button></a>
                    <a href = "{{ path('delete_postjob', {id: user.id }) }}"><button type="button" class="btn1">DELETE POST</button></a>                <!-- </form> -->
                    <a href = "{{ path('publish_postjob', {id: user.id }) }}"><button type="button" class="btn1">PUBLISH POST</button></a>
                
                </div>
            </div> 
            <div class="row">
                <div class="col-sm-12">
                    <hr>
                </div>
            </div>     
        </div>
     {% endfor %} #}

 
        <form name="bulk_action_form" action="{{ path('delete_posts') }}" method="post" onSubmit="return delete_confirm();">
            <div class="table-responsive">
                <table class="bordered table">
                    <thead class="table-info
                        </tr>
                    </thead>" >
                        <tr>
                            <th><input type="checkbox" id="select_all" value=""/></th>        
                            <th>Image</th>
                            <th>User Name</th>
                            <th>Job Title</th>
                            <th>Email</th>
                            <th>Location</th>
                            <th>Date</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tr>
                    {% for user in appointments %}
                        <td><input type="checkbox" name="checked_id[]" class="checkbox" value="{{ user.id }}"/></td>        
                        {# <td> <img src="{{ asset('image/rohit.jpg') }}"  style="color:blue;width:100px;height:100px;"/></td> #}
                        <td> <img src="{{  asset('uploads/brochures/' ~ user.image)}}"  style="color:blue;width:100px;height:100px;"/></td>
                        <td>{{ user.name }}</td>
                        <td>{{ user.jobtitle }}</td>
                        <td>{{ user.email }}</td>
                        <td>{{ user.location }}</td>
                        <td>{{ "now"|date("m/d/Y") }}</td>
                        {# <td><a href = "{{ path('all_postjob', {id: user.id }) }}">{{ user.id }}</td> #}
                        {# <td><a href='showuserpost.php?id=<?php echo $rows['user_id'];?>'id="<?php echo $rows['user_name']; ?>"></a></td> #}
                        <td><!-- Default switch -->
                        {# <input type="button" id="btnEnableDisable" value="Disable" /> #}
                            <a href="{{ path('delete_postjob', {id: user.id }) }}" title="Delete post"  onclick="return showAlert()">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"/>
                                <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"/>
                                </svg>
                            </a>   
                              <a href="{{ path('edit_postjob', {id: user.id }) }}" title="Edit Post">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16" >
                                <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"/>
                              
                                </svg>
                                  </a> 
                              <a href="{{ path('publish_postjob', {id: user.id }) }}" title="Publish Post" onclick="return showAlertPublish()">    
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-bag-plus-fill" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M10.5 3.5a2.5 2.5 0 0 0-5 0V4h5zm1 0V4H15v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4h3.5v-.5a3.5 3.5 0 1 1 7 0M8.5 8a.5.5 0 0 0-1 0v1.5H6a.5.5 0 0 0 0 1h1.5V12a.5.5 0 0 0 1 0v-1.5H10a.5.5 0 0 0 0-1H8.5z"/>
                                 </svg>
                               </a> 

                               <button type="button" class="model_view" data-toggle="modal" data-target="#myModal{{ user.id }}"title="See Post"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-eye-fill" viewBox="0 0 16 16"><path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0"/><path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8m8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7"/></svg></button>

                         </td>
                    </tr>
                        {# <?php } ?>
                        <?php// }else{ ?>
                    <!-- <tr><td colspan="9">No records found.</td></tr> -->
                        <?php //} ?> #}
                        <div id="myModal{{ user.id }}" class="modal fade" role="dialog">
			                <div class="modal-dialog">
			                   <div class="modal-content">
				            	    <div class="modal-header">
                                     <img src="{{  asset('uploads/brochures/' ~ user.image)}}" style="color:blue;width:180px;height:180px;" class="avatar img-circle img-thumbnail" alt="avatar"/>
					                   {# <button type="button" class="close" data-dismiss="modal">&times;</button> #}
						               {# <h4 class="modal-title">Details</h4> #}
				                    </div>
				                    <div class="modal-body">
                                        <h4>Name : {{ user.name }}</h4>
                                        <h4>Job Title : {{ user.jobtitle }}</h4>
                                        <h4>Email : {{ user.email }}</h4>
                                        <h4>Location : {{ user.location }}</h4>
				                    </div>
				                </div>
			                </div>
		                </div>
                            {% endfor %}
                </table>
            </div>
            <input type="submit" class="btn btn-danger" name="bulk_delete_submit" value="Delete"/>
        </form>
    </div>
    
   
    

    <div class="center">
        <div class="pagination">
            {# <?php
            //display the link of the pages in URL  
               for($page = 1; $page<= $number_of_page; $page++) {  
                     echo '<a href = "allpost.php?page=' . $page . '"class="active">' . '   '  .$page . ' </a>';  
                  }
            ?> #}
        </div>
        <div class="navigation">
            {{ knp_pagination_render(appointments) }}
        </div>
    </div>
{# </div>
    </div>     #}
   <script>
     function showAlert() {
        return (confirm("Do you want to delete this post?"));
   
     }
     function showAlertPublish() {
        return (confirm('Do you want to publish this job?'));

     }
     function delete_confirm(){
         if($('.checkbox:checked').length > 0){
            var result = confirm("Are you sure to delete selected users?");
            if(result){
                return true;
            }else{
                return false;
            }
        }else{
            alert('Select at least 1 record to delete.');
            return false;
        }
    }
        $(document).ready(function(){
            $('#select_all').on('click',function(){
                if(this.checked){
                    $('.checkbox').each(function(){
                        this.checked = true;
                    });
                }else{
                    $('.checkbox').each(function(){
                        this.checked = false;
                    });
                }
            });
    
        $('.checkbox').on('click',function(){
            if($('.checkbox:checked').length == $('.checkbox').length){
                $('#select_all').prop('checked',true);
            }else{
                $('#select_all').prop('checked',false);
            }
        });
    });
   </script>
    <script src="../assets/js/script.js" type="text/javascript"></script>
{% endblock %}